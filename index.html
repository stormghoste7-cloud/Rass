<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Princesse Laura üéß</title>

<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
  background: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
  color: white;
  overflow-x: hidden;
}

/* Navigation */
.navbar {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  display: flex;
  justify-content: space-around;
  align-items: center;
  background: rgba(0, 0, 0, 0.9);
  backdrop-filter: blur(10px);
  padding: 15px 0;
  z-index: 1000;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.nav-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  background: none;
  border: none;
  color: white;
  font-size: 0.8rem;
  cursor: pointer;
  opacity: 0.6;
  transition: all 0.3s;
}

.nav-item.active {
  opacity: 1;
  color: #ff0050;
}

.nav-icon {
  font-size: 1.5rem;
  margin-bottom: 5px;
}

/* Screens */
.screen {
  min-height: 100vh;
  padding-top: 70px;
  padding-bottom: 80px;
  display: none;
}

.screen.active {
  display: block;
  animation: fadeIn 0.5s;
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

/* Home Screen */
.home-screen {
  padding: 20px;
}

.app-title {
  text-align: center;
  font-size: 2.8rem;
  margin-bottom: 30px;
  background: linear-gradient(45deg, #ff0050, #00d4ff);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.mood-selection {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 15px;
  max-width: 500px;
  margin: 0 auto;
}

.mood-card {
  background: rgba(255, 255, 255, 0.1);
  border-radius: 20px;
  padding: 25px 15px;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.3s;
  border: 2px solid transparent;
}

.mood-card:hover {
  transform: translateY(-5px);
  background: rgba(255, 255, 255, 0.15);
  border-color: #ff0050;
}

.mood-emoji {
  font-size: 3rem;
  margin-bottom: 10px;
}

.mood-name {
  font-size: 1.2rem;
  font-weight: 600;
}

/* Feed Screen */
.feed-screen {
  position: relative;
}

.music-card {
  background: linear-gradient(135deg, rgba(255,0,80,0.1), rgba(0,212,255,0.1));
  border-radius: 25px;
  margin: 20px;
  padding: 30px;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-height: 70vh;
  text-align: center;
  position: relative;
  overflow: hidden;
}

.music-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: radial-gradient(circle at 30% 30%, rgba(255,0,80,0.1), transparent 70%);
}

.music-title {
  font-size: 2.5rem;
  font-weight: 700;
  margin-bottom: 10px;
  z-index: 1;
}

.music-artist {
  font-size: 1.5rem;
  color: rgba(255, 255, 255, 0.7);
  margin-bottom: 30px;
  z-index: 1;
}

.music-type {
  display: inline-block;
  background: rgba(255, 255, 255, 0.1);
  padding: 8px 20px;
  border-radius: 20px;
  margin-bottom: 30px;
  font-size: 0.9rem;
  z-index: 1;
}

.album-art {
  width: 250px;
  height: 250px;
  border-radius: 20px;
  margin: 30px 0;
  background: linear-gradient(45deg, #ff0050, #00d4ff);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 4rem;
  box-shadow: 0 20px 40px rgba(0,0,0,0.3);
  z-index: 1;
}

/* Action buttons */
.action-buttons {
  position: fixed;
  right: 20px;
  bottom: 150px;
  display: flex;
  flex-direction: column;
  gap: 15px;
  z-index: 100;
}

.action-btn {
  background: #ff0050;
  border: none;
  color: white;
  width: 60px;
  height: 60px;
  border-radius: 50%;
  font-size: 1.5rem;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 5px 15px rgba(255,0,80,0.3);
  transition: all 0.3s;
}

.action-btn:hover {
  transform: scale(1.1);
  background: #ff3377;
}

.action-btn.secondary {
  background: rgba(255, 255, 255, 0.1);
}

.action-btn.secondary:hover {
  background: rgba(255, 255, 255, 0.2);
}

/* Video Feed (TikTok-like) */
.video-feed {
  position: relative;
  height: calc(100vh - 70px);
  overflow: hidden;
}

.video-container {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}

.video-player {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.video-overlay {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  padding: 20px;
  background: linear-gradient(transparent, rgba(0,0,0,0.7));
}

.video-username {
  font-size: 1.2rem;
  font-weight: 600;
  margin-bottom: 10px;
}

.video-caption {
  font-size: 1rem;
  margin-bottom: 15px;
  opacity: 0.9;
}

.video-tags {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.tag {
  background: rgba(255, 255, 255, 0.2);
  padding: 5px 10px;
  border-radius: 15px;
  font-size: 0.8rem;
}

.video-sidebar {
  position: absolute;
  right: 20px;
  bottom: 100px;
  display: flex;
  flex-direction: column;
  gap: 20px;
  align-items: center;
}

.video-action {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 5px;
}

.video-action-btn {
  background: rgba(255, 255, 255, 0.1);
  border: none;
  width: 50px;
  height: 50px;
  border-radius: 50%;
  color: white;
  font-size: 1.5rem;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.3s;
}

.video-action-btn:hover {
  background: rgba(255, 255, 255, 0.2);
}

.video-action-count {
  font-size: 0.8rem;
  opacity: 0.8;
}

/* Upload Screen */
.upload-screen {
  padding: 20px;
  max-width: 500px;
  margin: 0 auto;
}

.upload-title {
  text-align: center;
  font-size: 2rem;
  margin-bottom: 30px;
}

.upload-area {
  background: rgba(255, 255, 255, 0.05);
  border: 2px dashed rgba(255, 255, 255, 0.3);
  border-radius: 20px;
  padding: 40px;
  text-align: center;
  margin-bottom: 30px;
  cursor: pointer;
  transition: all 0.3s;
}

.upload-area:hover {
  border-color: #ff0050;
  background: rgba(255, 0, 80, 0.05);
}

.upload-icon {
  font-size: 3rem;
  margin-bottom: 15px;
  color: #ff0050;
}

.upload-input {
  display: none;
}

.form-group {
  margin-bottom: 20px;
}

.form-label {
  display: block;
  margin-bottom: 8px;
  font-weight: 600;
}

.form-input, .form-textarea, .form-select {
  width: 100%;
  padding: 15px;
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 15px;
  color: white;
  font-size: 1rem;
}

.form-textarea {
  min-height: 100px;
  resize: vertical;
}

.submit-btn {
  width: 100%;
  padding: 18px;
  background: linear-gradient(45deg, #ff0050, #00d4ff);
  border: none;
  border-radius: 15px;
  color: white;
  font-size: 1.1rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s;
}

.submit-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 10px 20px rgba(255, 0, 80, 0.3);
}

/* Profile Screen */
.profile-screen {
  padding: 20px;
}

.profile-header {
  display: flex;
  align-items: center;
  gap: 20px;
  margin-bottom: 30px;
}

.profile-avatar {
  width: 80px;
  height: 80px;
  border-radius: 50%;
  background: linear-gradient(45deg, #ff0050, #00d4ff);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 2rem;
}

.profile-info h2 {
  font-size: 1.8rem;
  margin-bottom: 5px;
}

.profile-stats {
  display: flex;
  gap: 20px;
  margin-bottom: 30px;
}

.stat {
  text-align: center;
}

.stat-number {
  font-size: 1.5rem;
  font-weight: 700;
  color: #ff0050;
}

.stat-label {
  font-size: 0.9rem;
  opacity: 0.7;
}

.profile-tabs {
  display: flex;
  gap: 10px;
  margin-bottom: 20px;
}

.tab-btn {
  flex: 1;
  padding: 15px;
  background: rgba(255, 255, 255, 0.05);
  border: none;
  border-radius: 15px;
  color: white;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s;
}

.tab-btn.active {
  background: linear-gradient(45deg, #ff0050, #00d4ff);
}

.videos-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 15px;
}

.video-thumbnail {
  aspect-ratio: 9/16;
  background: rgba(255, 255, 255, 0.05);
  border-radius: 15px;
  position: relative;
  overflow: hidden;
}

.video-thumbnail::after {
  content: '‚ñ∂';
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: rgba(0, 0, 0, 0.5);
  width: 50px;
  height: 50px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.5rem;
}

/* Mood History */
.mood-history {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.history-item {
  background: rgba(255, 255, 255, 0.05);
  padding: 15px;
  border-radius: 15px;
  display: flex;
  align-items: center;
  gap: 15px;
}

.history-emoji {
  font-size: 2rem;
}

.history-info h4 {
  margin-bottom: 5px;
}

.history-date {
  font-size: 0.8rem;
  opacity: 0.7;
}

/* Notifications */
.notification {
  position: fixed;
  top: 80px;
  right: 20px;
  background: linear-gradient(45deg, #ff0050, #00d4ff);
  padding: 15px 25px;
  border-radius: 15px;
  z-index: 10000;
  animation: slideInRight 0.3s, fadeOut 0.3s 2.7s;
  box-shadow: 0 10px 25px rgba(0,0,0,0.3);
}

@keyframes slideInRight {
  from { transform: translateX(100%); opacity: 0; }
  to { transform: translateX(0); opacity: 1; }
}

@keyframes fadeOut {
  from { opacity: 1; }
  to { opacity: 0; }
}

/* Loading spinner */
.loading {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0,0,0,0.8);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 10000;
  font-size: 2rem;
}

/* Responsive */
@media (max-width: 768px) {
  .app-title {
    font-size: 2.2rem;
  }
  
  .music-title {
    font-size: 2rem;
  }
  
  .album-art {
    width: 200px;
    height: 200px;
  }
  
  .videos-grid {
    grid-template-columns: 1fr;
  }
}
</style>
</head>

<body>

<!-- Navigation -->
<div class="navbar">
  <button class="nav-item active" onclick="showScreen('home')">
    <span class="nav-icon">üè†</span>
    <span>Accueil</span>
  </button>
  <button class="nav-item" onclick="showScreen('feed')">
    <span class="nav-icon">üéµ</span>
    <span>Musique</span>
  </button>
  <button class="nav-item" onclick="showScreen('video')">
    <span class="nav-icon">üé¨</span>
    <span>Vid√©os</span>
  </button>
  <button class="nav-item" onclick="showScreen('upload')">
    <span class="nav-icon">‚ûï</span>
    <span>Publier</span>
  </button>
  <button class="nav-item" onclick="showScreen('profile')">
    <span class="nav-icon">üëë</span>
    <span>Profil</span>
  </button>
</div>

<!-- Home Screen -->
<div id="home" class="screen active home-screen">
  <h1 class="app-title">Princesse Laura üëë</h1>
  <p style="text-align: center; margin-bottom: 40px; font-size: 1.2rem; opacity: 0.8;">
    L'application ultime pour d√©couvrir de la musique, des animes et partager tes vid√©os
  </p>
  
  <div class="mood-selection">
    <div class="mood-card" onclick="selectMood('happy')">
      <div class="mood-emoji">üòÑ</div>
      <div class="mood-name">Heureux</div>
    </div>
    <div class="mood-card" onclick="selectMood('sad')">
      <div class="mood-emoji">üò¢</div>
      <div class="mood-name">Triste</div>
    </div>
    <div class="mood-card" onclick="selectMood('angry')">
      <div class="mood-emoji">üò°</div>
      <div class="mood-name">En col√®re</div>
    </div>
    <div class="mood-card" onclick="selectMood('chill')">
      <div class="mood-emoji">üòå</div>
      <div class="mood-name">D√©tendu</div>
    </div>
    <div class="mood-card" onclick="selectMood('energetic')">
      <div class="mood-emoji">‚ö°</div>
      <div class="mood-name">√ânergique</div>
    </div>
    <div class="mood-card" onclick="selectMood('nostalgic')">
      <div class="mood-emoji">‚ú®</div>
      <div class="mood-name">Nostalgique</div>
    </div>
  </div>
</div>

<!-- Music Feed Screen -->
<div id="feed" class="screen feed-screen">
  <div class="music-card" id="musicCard">
    <!-- Content will be generated by JavaScript -->
  </div>
  
  <div class="action-buttons">
    <button class="action-btn" onclick="nextRecommendation()">üîÅ</button>
    <button class="action-btn secondary" onclick="toggleFavorite()" id="favoriteBtn">‚ù§Ô∏è</button>
    <button class="action-btn secondary" onclick="shareRecommendation()">üì§</button>
    <button class="action-btn secondary" onclick="playMusic()">‚ñ∂Ô∏è</button>
  </div>
</div>

<!-- Video Feed Screen -->
<div id="video" class="screen video-feed">
  <!-- Video content will be generated by JavaScript -->
</div>

<!-- Upload Screen -->
<div id="upload" class="screen upload-screen">
  <h2 class="upload-title">Publier une vid√©o</h2>
  
  <div class="upload-area" onclick="document.getElementById('videoFile').click()">
    <div class="upload-icon">üìÅ</div>
    <p>Clique pour s√©lectionner une vid√©o</p>
    <p style="font-size: 0.9rem; opacity: 0.7; margin-top: 10px;">MP4, MOV, AVI jusqu'√† 100MB</p>
    <input type="file" id="videoFile" class="upload-input" accept="video/*">
  </div>
  
  <div class="form-group">
    <label class="form-label">Titre de la vid√©o</label>
    <input type="text" class="form-input" id="videoTitle" placeholder="Donne un titre accrocheur">
  </div>
  
  <div class="form-group">
    <label class="form-label">Description</label>
    <textarea class="form-textarea" id="videoDescription" placeholder="D√©cris ta vid√©o..."></textarea>
  </div>
  
  <div class="form-group">
    <label class="form-label">Humeur associ√©e</label>
    <select class="form-select" id="videoMood">
      <option value="happy">üòÑ Heureux</option>
      <option value="sad">üò¢ Triste</option>
      <option value="angry">üò° En col√®re</option>
      <option value="chill">üòå D√©tendu</option>
      <option value="energetic">‚ö° √ânergique</option>
      <option value="nostalgic">‚ú® Nostalgique</option>
    </select>
  </div>
  
  <div class="form-group">
    <label class="form-label">Tags (s√©par√©s par des virgules)</label>
    <input type="text" class="form-input" id="videoTags" placeholder="musique, anime, danse, ...">
  </div>
  
  <button class="submit-btn" onclick="uploadVideo()">Publier la vid√©o</button>
</div>

<!-- Profile Screen -->
<div id="profile" class="screen profile-screen">
  <div class="profile-header">
    <div class="profile-avatar">üëë</div>
    <div class="profile-info">
      <h2>Princesse Laura</h2>
      <p style="opacity: 0.7;">@princesselaura</p>
    </div>
  </div>
  
  <div class="profile-stats">
    <div class="stat">
      <div class="stat-number" id="postCount">0</div>
      <div class="stat-label">Publications</div>
    </div>
    <div class="stat">
      <div class="stat-number" id="favoriteCount">0</div>
      <div class="stat-label">Favoris</div>
    </div>
    <div class="stat">
      <div class="stat-number" id="moodCount">0</div>
      <div class="stat-label">Humeurs</div>
    </div>
  </div>
  
  <div class="profile-tabs">
    <button class="tab-btn active" onclick="showProfileTab('videos')">Mes vid√©os</button>
    <button class="tab-btn" onclick="showProfileTab('favorites')">Favoris</button>
    <button class="tab-btn" onclick="showProfileTab('history')">Historique</button>
  </div>
  
  <div id="profileVideos" class="videos-grid">
    <!-- User videos will be loaded here -->
  </div>
  
  <div id="profileFavorites" class="videos-grid" style="display: none;">
    <!-- Favorite videos will be loaded here -->
  </div>
  
  <div id="profileHistory" class="mood-history" style="display: none;">
    <!-- Mood history will be loaded here -->
  </div>
</div>

<script>
// Database with extended content
const database = {
  happy: {
    music: [
      {title: "Happy", artist: "Pharrell Williams", type: "Musique", color: "#FFD700"},
      {title: "Uptown Funk", artist: "Bruno Mars", type: "Musique", color: "#FF6B6B"},
      {title: "Can't Stop The Feeling", artist: "Justin Timberlake", type: "Musique", color: "#4ECDC4"}
    ],
    anime: [
      {title: "Spy x Family", artist: "Anime Com√©die", type: "Anime", color: "#FF9F1C"},
      {title: "K-On!", artist: "Anime Musical", type: "Anime", color: "#FF6B6B"}
    ],
    film: [
      {title: "La La Land", artist: "Film Musical", type: "Film", color: "#6A0572"},
      {title: "Intouchables", artist: "Com√©die Dramatique", type: "Film", color: "#118AB2"}
    ]
  },
  sad: {
    music: [
      {title: "Fix You", artist: "Coldplay", type: "Musique", color: "#1E90FF"},
      {title: "Someone Like You", artist: "Adele", type: "Musique", color: "#6A0572"},
      {title: "The Night We Met", artist: "Lord Huron", type: "Musique", color: "#2A9D8F"}
    ],
    anime: [
      {title: "Your Lie in April", artist: "Anime Dramatique", type: "Anime", color: "#E76F51"},
      {title: "Violet Evergarden", artist: "Anime √âmouvant", type: "Anime", color: "#264653"}
    ],
    film: [
      {title: "A Silent Voice", artist: "Film d'Animation", type: "Film", color: "#2A9D8F"},
      {title: "Forrest Gump", artist: "Drame", type: "Film", color: "#E9C46A"}
    ]
  },
  angry: {
    music: [
      {title: "Lose Yourself", artist: "Eminem", type: "Musique", color: "#E63946"},
      {title: "DNA", artist: "Kendrick Lamar", type: "Musique", color: "#1D3557"},
      {title: "Numb", artist: "Linkin Park", type: "Musique", color: "#457B9D"}
    ],
    anime: [
      {title: "Attack on Titan", artist: "Anime Action", type: "Anime", color: "#E63946"},
      {title: "Berserk", artist: "Dark Fantasy", type: "Anime", color: "#1D3557"}
    ],
    film: [
      {title: "Fight Club", artist: "Drame Psychologique", type: "Film", color: "#E76F51"},
      {title: "John Wick", artist: "Action", type: "Film", color: "#264653"}
    ]
  },
  chill: {
    music: [
      {title: "Weightless", artist: "Marconi Union", type: "Musique", color: "#2A9D8F"},
      {title: "Sunflower", artist: "Post Malone", type: "Musique", color: "#E9C46A"},
      {title: "Island in the Sun", artist: "Weezer", type: "Musique", color: "#F4A261"}
    ],
    anime: [
      {title: "Mushishi", artist: "Anime Zen", type: "Anime", color: "#264653"},
      {title: "Yuru Camp", artist: "Anime Relaxant", type: "Anime", color: "#2A9D8F"}
    ],
    film: [
      {title: "Le Voyage de Chihiro", artist: "Animation", type: "Film", color: "#E76F51"},
      {title: "Am√©lie Poulain", artist: "Com√©die Dramatique", type: "Film", color: "#E63946"}
    ]
  },
  energetic: {
    music: [
      {title: "Thunderstruck", artist: "AC/DC", type: "Musique", color: "#FF9F1C"},
      {title: "Eye of the Tiger", artist: "Survivor", type: "Musique", color: "#E63946"},
      {title: "Power", artist: "Kanye West", type: "Musique", color: "#1D3557"}
    ],
    anime: [
      {title: "Haikyuu!!", artist: "Anime Sport", type: "Anime", color: "#E63946"},
      {title: "Demon Slayer", artist: "Anime Action", type: "Anime", color: "#6A0572"}
    ],
    film: [
      {title: "Mad Max: Fury Road", artist: "Action", type: "Film", color: "#E9C46A"},
      {title: "300", artist: "√âpop√©e", type: "Film", color: "#1D3557"}
    ]
  },
  nostalgic: {
    music: [
      {title: "Bohemian Rhapsody", artist: "Queen", type: "Musique", color: "#6A0572"},
      {title: "Smells Like Teen Spirit", artist: "Nirvana", type: "Musique", color: "#1D3557"},
      {title: "Billie Jean", artist: "Michael Jackson", type: "Musique", color: "#2A9D8F"}
    ],
    anime: [
      {title: "Dragon Ball Z", artist: "Anime Classique", type: "Anime", color: "#FF9F1C"},
      {title: "Sailor Moon", artist: "Magical Girl", type: "Anime", color: "#E63946"}
    ],
    film: [
      {title: "Retour vers le futur", artist: "Science-Fiction", type: "Film", color: "#118AB2"},
      {title: "Harry Potter", artist: "Fantasy", type: "Film", color: "#2A9D8F"}
    ]
  }
};

// Video database (simulated)
const videoDatabase = [
  {
    id: 1,
    username: "@musiclover",
    caption: "D√©couverte du jour üéµ #musique #d√©couverte",
    tags: ["musique", "d√©couverte", "happy"],
    mood: "happy",
    likes: 245,
    comments: 32,
    shares: 12
  },
  {
    id: 2,
    username: "@animefan",
    caption: "Mon anime du moment üòç #anime #recommendation",
    tags: ["anime", "recommendation", "nostalgic"],
    mood: "nostalgic",
    likes: 512,
    comments: 89,
    shares: 45
  },
  {
    id: 3,
    username: "@chillvibes",
    caption: "Vibes relaxantes pour la soir√©e üçÉ #chill #relax",
    tags: ["chill", "relax", "musique"],
    mood: "chill",
    likes: 189,
    comments: 21,
    shares: 8
  }
];

// App state
let currentMood = null;
let currentType = "music";
let usedItems = [];
let favorites = JSON.parse(localStorage.getItem('princesselaura_favorites')) || [];
let moodHistory = JSON.parse(localStorage.getItem('princesselaura_moodHistory')) || [];
let userVideos = JSON.parse(localStorage.getItem('princesselaura_videos')) || [];
let currentVideoIndex = 0;

// Initialize app
function init() {
  updateProfileStats();
  loadUserVideos();
  showNotification("Bienvenue sur Princesse Laura üëë");
}

// Show screen and update navigation
function showScreen(screenId) {
  // Hide all screens
  document.querySelectorAll('.screen').forEach(screen => {
    screen.classList.remove('active');
  });
  
  // Show selected screen
  document.getElementById(screenId).classList.add('active');
  
  // Update navigation
  document.querySelectorAll('.nav-item').forEach(item => {
    item.classList.remove('active');
  });
  
  // Activate correct nav item
  const navItems = document.querySelectorAll('.nav-item');
  const screenIndex = ['home', 'feed', 'video', 'upload', 'profile'].indexOf(screenId);
  if (screenIndex >= 0) {
    navItems[screenIndex].classList.add('active');
  }
  
  // Load content for specific screens
  if (screenId === 'video') {
    loadVideoFeed();
  }
}

// Select mood and go to feed
function selectMood(mood) {
  currentMood = mood;
  usedItems = [];
  
  // Add to history
  const historyItem = {
    mood: mood,
    date: new Date().toISOString(),
    name: getMoodName(mood)
  };
  moodHistory.unshift(historyItem);
  if (moodHistory.length > 20) moodHistory = moodHistory.slice(0, 20);
  localStorage.setItem('princesselaura_moodHistory', JSON.stringify(moodHistory));
  
  // Show feed screen
  showScreen('feed');
  
  // Show first recommendation
  nextRecommendation();
  
  // Show notification
  showNotification(`Humeur ${getMoodName(mood)} s√©lectionn√©e üéµ`);
}

// Get mood name from mood key
function getMoodName(moodKey) {
  const moodNames = {
    happy: "Heureux",
    sad: "Triste",
    angry: "En col√®re",
    chill: "D√©tendu",
    energetic: "√ânergique",
    nostalgic: "Nostalgique"
  };
  return moodNames[moodKey] || moodKey;
}

// Get mood emoji from mood key
function getMoodEmoji(moodKey) {
  const moodEmojis = {
    happy: "üòÑ",
    sad: "üò¢",
    angry: "üò°",
    chill: "üòå",
    energetic: "‚ö°",
    nostalgic: "‚ú®"
  };
  return moodEmojis[moodKey] || "üéµ";
}

// Show next recommendation
function nextRecommendation() {
  if (!currentMood) return;
  
  // Cycle through types: music -> anime -> film -> music
  const types = ["music", "anime", "film"];
  const currentIndex = types.indexOf(currentType);
  currentType = types[(currentIndex + 1) % types.length];
  
  // Get available items for current mood and type
  const allItems = database[currentMood][currentType];
  const availableItems = allItems.filter(item => !usedItems.includes(item.title));
  
  let selectedItem;
  
  if (availableItems.length === 0) {
    // Reset used items if all have been shown
    usedItems = [];
    selectedItem = allItems[Math.floor(Math.random() * allItems.length)];
  } else {
    selectedItem = availableItems[Math.floor(Math.random() * availableItems.length)];
  }
  
  usedItems.push(selectedItem.title);
  
  // Update display
  const musicCard = document.getElementById('musicCard');
  const typeText = currentType === 'music' ? 'Musique' : (currentType === 'anime' ? 'Anime' : 'Film');
  
  musicCard.innerHTML = `
    <div class="music-type">${typeText}</div>
    <div class="music-title">${selectedItem.title}</div>
    <div class="music-artist">${selectedItem.artist}</div>
    <div class="album-art" style="background: linear-gradient(45deg, ${selectedItem.color}, #00d4ff);">
      ${currentType === 'music' ? 'üéµ' : (currentType === 'anime' ? 'üé¨' : 'üé•')}
    </div>
    <p style="opacity: 0.7;">Humeur: ${getMoodName(currentMood)} ${getMoodEmoji(currentMood)}</p>
  `;
  
  // Update favorite button
  const isFavorite = favorites.some(fav => fav.title === selectedItem.title && fav.type === currentType);
  document.getElementById('favoriteBtn').innerHTML = isFavorite ? '‚ù§Ô∏è' : 'ü§ç';
  
  // Update music card background
  musicCard.style.background = `linear-gradient(135deg, ${selectedItem.color}20, #00d4ff20)`;
}

// Toggle favorite
function toggleFavorite() {
  if (!currentMood) return;
  
  const musicCard = document.getElementById('musicCard');
  const title = musicCard.querySelector('.music-title').textContent;
  const artist = musicCard.querySelector('.music-artist').textContent;
  const type = musicCard.querySelector('.music-type').textContent;
  
  const favoriteItem = {
    title,
    artist,
    type,
    mood: currentMood,
    date: new Date().toISOString()
  };
  
  // Check if already favorite
  const existingIndex = favorites.findIndex(fav => 
    fav.title === title && fav.type === type && fav.mood === currentMood
  );
  
  if (existingIndex !== -1) {
    // Remove from favorites
    favorites.splice(existingIndex, 1);
    document.getElementById('favoriteBtn').innerHTML = 'ü§ç';
    showNotification("Retir√© des favoris");
  } else {
    // Add to favorites
    favorites.push(favoriteItem);
    document.getElementById('favoriteBtn').innerHTML = '‚ù§Ô∏è';
    showNotification("Ajout√© aux favoris ‚ù§Ô∏è");
  }
  
  // Save to localStorage
  localStorage.setItem('princesselaura_favorites', JSON.stringify(favorites));
  updateProfileStats();
}

// Share recommendation
function shareRecommendation() {
  const musicCard = document.getElementById('musicCard');
  const title = musicCard.querySelector('.music-title').textContent;
  const artist = musicCard.querySelector('.music-artist').textContent;
  const type = musicCard.querySelector('.music-type').textContent;
  
  const shareText = `Je recommande "${title}" par ${artist} (${type}) sur Princesse Laura üëë`;
  
  if (navigator.share) {
    navigator.share({
      title: 'Princesse Laura Recommendation',
      text: shareText,
      url: window.location.href
    });
  } else {
    navigator.clipboard.writeText(shareText);
    showNotification("Recommendation copi√©e dans le presse-papier üìã");
  }
}

// Play music (simulated)
function playMusic() {
  showNotification("Lecture en cours... ‚ñ∂Ô∏è");
}

// Load video feed
function loadVideoFeed() {
  const videoContainer = document.querySelector('.video-feed');
  
  if (videoDatabase.length === 0) {
    videoContainer.innerHTML = `
      <div style="display: flex; align-items: center; justify-content: center; height: 100%;">
        <div style="text-align: center;">
          <div style="font-size: 4rem; margin-bottom: 20px;">üé¨</div>
          <h2>Aucune vid√©o pour le moment</h2>
          <p style="opacity: 0.7; margin-top: 10px;">Soyez le premier √† publier une vid√©o !</p>
        </div>
      </div>
    `;
    return;
  }
  
  const video = videoDatabase[currentVideoIndex];
  
  videoContainer.innerHTML = `
    <div class="video-container">
      <div style="background: linear-gradient(45deg, #ff0050, #00d4ff); width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; font-size: 5rem;">
        üé¨
      </div>
      <div class="video-overlay">
        <div class="video-username">${video.username}</div>
        <div class="video-caption">${video.caption}</div>
        <div class="video-tags">
          ${video.tags.map(tag => `<span class="tag">#${tag}</span>`).join('')}
        </div>
      </div>
      <div class="video-sidebar">
        <div class="video-action">
          <button class="video-action-btn" onclick="likeVideo(${video.id})">‚ù§Ô∏è</button>
          <div class="video-action-count">${video.likes}</div>
        </div>
        <div class="video-action">
          <button class="video-action-btn" onclick="commentOnVideo(${video.id})">üí¨</button>
          <div class="video-action-count">${video.comments}</div>
        </div>
        <div class="video-action">
          <button class="video-action-btn" onclick="shareVideo(${video.id})">üì§</button>
          <div class="video-action-count">${video.shares}</div>
        </div>
        <div class="video-action">
          <button class="video-action-btn" onclick="nextVideo()">‚è≠Ô∏è</button>
        </div>
      </div>
    </div>
  `;
}

// Next video
function nextVideo() {
  currentVideoIndex = (currentVideoIndex + 1) % videoDatabase.length;
  loadVideoFeed();
}

// Like video
function likeVideo(videoId) {
  const video = videoDatabase.find(v => v.id === videoId);
  if (video) {
    video.likes++;
    showNotification("Vid√©o aim√©e ‚ù§Ô∏è");
    loadVideoFeed();
  }
}

// Comment on video
function commentOnVideo(videoId) {
  const comment = prompt("√âcrivez votre commentaire :");
  if (comment) {
    const video = videoDatabase.find(v => v.id === videoId);
    if (video) {
      video.comments++;
      showNotification("Commentaire publi√© üí¨");
    }
  }
}

// Share video
function shareVideo(videoId) {
  const video = videoDatabase.find(v => v.id === videoId);
  if (video) {
    video.shares++;
    showNotification("Vid√©o partag√©e üì§");
    
    if (navigator.share) {
      navigator.share({
        title: `Vid√©o de ${video.username}`,
        text: video.caption,
        url: window.location.href
      });
    }
  }
}

// Upload video
function uploadVideo() {
  const title = document.getElementById('videoTitle').value;
  const description = document.getElementById('videoDescription').value;
  const mood = document.getElementById('videoMood').value;
  const tags = document.getElementById('videoTags').value;
  
  if (!title || !description) {
    showNotification("Veuillez remplir tous les champs");
    return;
  }
  
  // Create new video object
  const newVideo = {
    id: Date.now(),
    username: "@princesselaura",
    caption: description,
    tags: tags.split(',').map(tag => tag.trim()).filter(tag => tag),
    mood: mood,
    likes: 0,
    comments: 0,
    shares: 0,
    title: title,
    date: new Date().toISOString()
  };
  
  // Add to user videos
  userVideos.unshift(newVideo);
  localStorage.setItem('princesselaura_videos', JSON.stringify(userVideos));
  
  // Clear form
  document.getElementById('videoTitle').value = '';
  document.getElementById('videoDescription').value = '';
  document.getElementById('videoTags').value = '';
  
  // Show success message
  showNotification("Vid√©o publi√©e avec succ√®s üéâ");
  
  // Update profile
  updateProfileStats();
  loadUserVideos();
  
  // Go to video feed
  showScreen('video');
  currentVideoIndex = 0;
  // Note: In a real app, you would add the video to the main feed
}

// Load user videos
function loadUserVideos() {
  const videosGrid = document.getElementById('profileVideos');
  
  if (userVideos.length === 0) {
    videosGrid.innerHTML = `
      <div style="grid-column: 1 / -1; text-align: center; padding: 40px; opacity: 0.7;">
        <div style="font-size: 3rem; margin-bottom: 20px;">üé¨</div>
        <h3>Aucune vid√©o publi√©e</h3>
        <p>Publiez votre premi√®re vid√©o !</p>
      </div>
    `;
    return;
  }
  
  videosGrid.innerHTML = userVideos.map(video => `
    <div class="video-thumbnail" style="background: linear-gradient(45deg, #ff005020, #00d4ff20);">
      <div style="position: absolute; bottom: 10px; left: 10px; right: 10px;">
        <div style="font-weight: 600; margin-bottom: 5px;">${video.title}</div>
        <div style="font-size: 0.8rem; opacity: 0.7;">${video.likes} ‚ù§Ô∏è</div>
      </div>
    </div>
  `).join('');
}

// Show profile tab
function showProfileTab(tab) {
  // Hide all tabs
  document.getElementById('profileVideos').style.display = 'none';
  document.getElementById('profileFavorites').style.display = 'none';
  document.getElementById('profileHistory').style.display = 'none';
  
  // Update tab buttons
  document.querySelectorAll('.tab-btn').forEach(btn => {
    btn.classList.remove('active');
  });
  
  // Show selected tab
  if (tab === 'videos') {
    document.getElementById('profileVideos').style.display = 'grid';
    document.querySelector('.tab-btn:nth-child(1)').classList.add('active');
  } else if (tab === 'favorites') {
    document.getElementById('profileFavorites').style.display = 'grid';
    document.querySelector('.tab-btn:nth-child(2)').classList.add('active');
    loadFavorites();
  } else if (tab === 'history') {
    document.getElementById('profileHistory').style.display = 'block';
    document.querySelector('.tab-btn:nth-child(3)').classList.add('active');
    loadHistory();
  }
}

// Load favorites
function loadFavorites() {
  const favoritesGrid = document.getElementById('profileFavorites');
  
  if (favorites.length === 0) {
    favoritesGrid.innerHTML = `
      <div style="grid-column: 1 / -1; text-align: center; padding: 40px; opacity: 0.7;">
        <div style="font-size: 3rem; margin-bottom: 20px;">‚ù§Ô∏è</div>
        <h3>Aucun favori</h3>
        <p>Ajoutez des musiques, animes ou films √† vos favoris !</p>
      </div>
    `;
    return;
  }
  
  favoritesGrid.innerHTML = favorites.map(fav => `
    <div class="video-thumbnail" style="background: linear-gradient(45deg, #ff005020, #00d4ff20);">
      <div style="position: absolute; top: 10px; left: 10px; background: rgba(0,0,0,0.5); padding: 5px 10px; border-radius: 10px; font-size: 0.8rem;">
        ${fav.type}
      </div>
      <div style="position: absolute; bottom: 10px; left: 10px; right: 10px;">
        <div style="font-weight: 600; margin-bottom: 5px;">${fav.title}</div>
        <div style="font-size: 0.8rem; opacity: 0.7;">${fav.artist}</div>
        <div style="font-size: 0.7rem; opacity: 0.5; margin-top: 5px;">${getMoodName(fav.mood)} ${getMoodEmoji(fav.mood)}</div>
      </div>
    </div>
  `).join('');
}

// Load history
function loadHistory() {
  const historyContainer = document.getElementById('profileHistory');
  
  if (moodHistory.length === 0) {
    historyContainer.innerHTML = `
      <div style="text-align: center; padding: 40px; opacity: 0.7;">
        <div style="font-size: 3rem; margin-bottom: 20px;">üìÖ</div>
        <h3>Aucun historique</h3>
        <p>Votre historique d'humeurs appara√Ætra ici</p>
      </div>
    `;
    return;
  }
  
  historyContainer.innerHTML = moodHistory.map(item => {
    const date = new Date(item.date);
    const formattedDate = date.toLocaleDateString('fr-FR', {
      day: '2-digit',
      month: '2-digit',
      hour: '2-digit',
      minute: '2-digit'
    });
    
    return `
      <div class="history-item">
        <div class="history-emoji">${getMoodEmoji(item.mood)}</div>
        <div class="history-info">
          <h4>${item.name || getMoodName(item.mood)}</h4>
          <div class="history-date">${formattedDate}</div>
        </div>
      </div>
    `;
  }).join('');
}

// Update profile stats
function updateProfileStats() {
  document.getElementById('postCount').textContent = userVideos.length;
  document.getElementById('favoriteCount').textContent = favorites.length;
  document.getElementById('moodCount').textContent = moodHistory.length;
}

// Show notification
function showNotification(message) {
  // Remove existing notification
  const existingNotification = document.querySelector('.notification');
  if (existingNotification) {
    existingNotification.remove();
  }
  
  // Create new notification
  const notification = document.createElement('div');
  notification.className = 'notification';
  notification.textContent = message;
  
  // Add to document
  document.body.appendChild(notification);
  
  // Remove after animation
  setTimeout(() => {
    if (notification.parentNode) {
      notification.remove();
    }
  }, 3000);
}

// Initialize app when page loads
window.addEventListener('DOMContentLoaded', init);
</script>
</body>
  </html>